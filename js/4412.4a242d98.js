"use strict";(self["webpackChunkosboha180"]=self["webpackChunkosboha180"]||[]).push([[4412],{21175:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(50124),s=n(48534),u=n(62760),a=n(57333);const i={addQuestion:function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.h.post("questions",e);case 2:return n=t.sent,t.abrupt("return",n.data.data);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),getQuestions:function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.h.get("questions/user-book/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data.data);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),addDegree:function(t,e,n){var r=u.h.patch("/questions/add-degree/".concat(t),{auditor_id:a.Z.getUser().id,reviews:e,degree:n});return console.log(r),r},deleteQuestion:function(t){var e=u.h["delete"]("/questions/".concat(t));return e},getByStatus:function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.h.get("questions/status/".concat(e));case 2:return n=t.sent,n.data,t.abrupt("return",n.data.data);case 5:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),getByUserBook:function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.h.get("questions/user_book_id/".concat(e));case 2:return n=t.sent,n.data,t.abrupt("return",n.data.data);case 5:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),acceptQuestion:function(t,e){var n,r=null;"accept"==e?n=t:"audit"==e&&(r=t);var s=u.h.post("/questions/review",{id:n,user_book_id:r,status:e,reviewer_id:a.Z.getUser().id});return s},rejectRetardThesis:function(t,e,n){var r=u.h.post("/questions/review",{id:t,status:n,reviewer_id:a.Z.getUser().id,reviews:e});return r},updateQuestion:function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e,n){var s;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.h.patch("/questions/".concat(n),e,{})["catch"]((function(t){console.log(t)}));case 2:return s=t.sent,t.abrupt("return",s.data.data);case 4:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),reviewQuestion:function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.h.patch("/questions/review-question/".concat(e))["catch"]((function(t){})).then((function(t){return t}));case 2:t.sent;case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),getById:function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.h.get("questions/".concat(e));case 2:return n=t.sent,n.data,t.abrupt("return",n.data.data);case 5:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),getByBook:function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.h.get("questions/book/".concat(e));case 2:return n=t.sent,n.data,t.abrupt("return",n.data.data);case 5:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}},54412:(t,e,n)=>{n.r(e),n.d(e,{default:()=>K});n(68309);var r=n(66252),s=n(3577),u=n(97573),a={class:"row"},i={class:"col-sm-12"},o={class:"card position-relative inner-page-bg bg-primary",style:{height:"150px"}},c={class:"inner-page-title"},l=(0,r._)("h3",{class:"text-white"},"مراجعة الأسئلة",-1),d={class:"text-white"},h={key:0,class:"col-sm-12"},p=(0,r._)("div",{class:"iq-card-body p-0"},[(0,r._)("div",{class:"image-block text-center"},[(0,r._)("img",{src:u,class:"img-fluid rounded w-50",alt:"blog-img"})]),(0,r._)("h4",{class:"text-center mt-3 mb-3"},"لا يوجد أسئلة")],-1),w={key:1,class:"col-sm-12"},v=(0,r._)("h4",{class:"card-title"},"أسئلة بحاجة للمراجعة",-1),f={class:"table-responsive"},_={id:"datatable",class:"table table-striped table-bordered"},b=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"رقم التوثيق"),(0,r._)("th",null,"اسم السفير"),(0,r._)("th",null,"اسم الكتاب"),(0,r._)("th",null,"عدد الأسئلة"),(0,r._)("th")])],-1),g={class:"btn-primary text-white bg-primary"},k=["onClick"],m={class:"text-center"},Z={key:2,class:"col-sm-12"},q=(0,r._)("h4",{class:"card-title"},"أسئلة بحاجة للتدقيق",-1),x={class:"table-responsive"},y={id:"datatable",class:"table table-striped table-bordered"},Q=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"رقم التوثيق"),(0,r._)("th",null,"اسم السفير"),(0,r._)("th",null,"اسم الكتاب"),(0,r._)("th",null,"عدد الأسئلة"),(0,r._)("th")])],-1),T={class:"btn-primary text-white bg-primary"},D=["onClick"],R={class:"text-center"};function z(t,e,n,u,z,A){var B=(0,r.up)("iq-card");return(0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("div",i,[(0,r._)("div",o,[(0,r._)("div",c,[l,(0,r._)("p",d,"تبقى "+(0,s.zw)(A.totalQuestions)+" سؤال ",1)])])]),0==z.questionsToReview.length&&0==z.questionsToAudit.length?((0,r.wg)(),(0,r.iD)("div",h,[(0,r.Wm)(B,{class:"iq-card"},{default:(0,r.w5)((function(){return[p]})),_:1})])):(0,r.kq)("",!0),z.questionsToReview.length>0?((0,r.wg)(),(0,r.iD)("div",w,[(0,r.Wm)(B,null,{headerTitle:(0,r.w5)((function(){return[v]})),body:(0,r.w5)((function(){return[(0,r._)("div",f,[(0,r._)("table",_,[b,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(z.questionsToReview,(function(t){return(0,r.wg)(),(0,r.iD)("tr",{key:t.id},[(0,r._)("td",g,(0,s.zw)(t.user_book.id),1),(0,r._)("td",null,[(0,r._)("a",{href:"javascript:void(0);",onClick:function(e){return A.listQuestions(t.user_book.id)}},(0,s.zw)(t.user_book.user.name),9,k)]),(0,r._)("td",null,(0,s.zw)(t.user_book.book.name),1),(0,r._)("td",null,(0,s.zw)(t.user_book.questions.length),1),(0,r._)("td",m,(0,s.zw)(A.getFormatedDate(t.user_book.updated_at)),1)])})),128))])])])]})),_:1})])):(0,r.kq)("",!0),z.questionsToAudit.length>0?((0,r.wg)(),(0,r.iD)("div",Z,[(0,r.Wm)(B,null,{headerTitle:(0,r.w5)((function(){return[q]})),body:(0,r.w5)((function(){return[(0,r._)("div",x,[(0,r._)("table",y,[Q,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(z.questionsToAudit,(function(t){return(0,r.wg)(),(0,r.iD)("tr",{key:t.id},[(0,r._)("td",T,(0,s.zw)(t.user_book.id),1),(0,r._)("td",null,[(0,r._)("a",{href:"javascript:void(0);",onClick:function(e){return A.listQuestions(t.user_book.id)}}," *************** ",8,D)]),(0,r._)("td",null,(0,s.zw)(t.user_book.book.name),1),(0,r._)("td",null,(0,s.zw)(t.user_book.questions.length),1),(0,r._)("td",R,(0,s.zw)(A.getFormatedDate(t.user_book.updated_at)),1)])})),128))])])])]})),_:1})])):(0,r.kq)("",!0)])}var A=n(50124),B=n(48534),C=n(7701),Y=n(21175),U=n(57333),j=n(30381),F=n.n(j);const S={components:{iqCard:C.Z},name:"ListQuestions",created:function(){var t=this;return(0,B.Z)((0,A.Z)().mark((function e(){return(0,A.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.canReview){e.next=5;break}return t.status="review",e.next=4,t.Questions(t.status);case 4:t.questionsToReview=e.sent;case 5:if(!t.canAudit){e.next=10;break}return t.status="audit",e.next=9,t.Questions(t.status);case 9:t.questionsToAudit=e.sent;case 10:case"end":return e.stop()}}),e)})))()},data:function(){return{questionsToReview:[],questionsToAudit:[],status:""}},methods:{getFormatedDate:function(t){return F()(String(t)).format("MM/DD/YYYY hA")},Questions:function(t){return(0,B.Z)((0,A.Z)().mark((function e(){return(0,A.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y.Z.getByStatus(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},listQuestions:function(t){this.$router.push({name:"questions.questions",params:{user_book_id:t}})}},computed:{totalQuestions:function(){return this.questionsToAudit.length+this.questionsToReview.length},user:function(){return U.Z.getUser()},canAudit:function(){return U.Z.hasRoles(this.user,["admin","super_auditer","auditor"])},canReview:function(){return U.Z.hasRoles(this.user,["admin","super_reviewer","reviewer"])}}};var W=n(83744);const H=(0,W.Z)(S,[["render",z]]),K=H},97573:(t,e,n)=>{t.exports=n.p+"img/export-congrats.05e72d52.png"}}]);
//# sourceMappingURL=4412.4a242d98.js.map