"use strict";(self["webpackChunkosboha180"]=self["webpackChunkosboha180"]||[]).push([[999],{91039:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(50124),a=t(48534),o=t(62760),i=t(57333);const s={getByStatus:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.h.get("general-informations/status/".concat(n));case 2:return t=e.sent,e.abrupt("return",t.data.data);case 4:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),getByUserBook:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.h.get("general-informations/user_book_id/".concat(n));case 2:return t=e.sent,t.data,e.abrupt("return",t.data.data);case 5:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),getByBook:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.h.get("general-informations/book/".concat(n));case 2:return t=e.sent,t.data,e.abrupt("return",t.data.data);case 5:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),addDegree:function(e,n,t){var r=o.h.patch("/general-informations/add-degree/".concat(e),{auditor_id:i.Z.getUser().id,reviews:n,degree:t});return r},getGeneralInformations:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.h.get("general-informations/user_book_id/".concat(n));case 2:return t=e.sent,e.abrupt("return",t.data.data);case 4:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),addGeneralInformations:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.h.post("general-informations/",n);case 2:return t=e.sent,e.abrupt("return",t.data.data);case 4:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),updateGeneralInformations:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.h.patch("general-informations/".concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data.data);case 4:case"end":return e.stop()}}),e)})));function n(n,t){return e.apply(this,arguments)}return n}(),acceptGeneralInformations:function(e){var n=o.h.post("/general-informations/review",{id:e,status:"audit",reviewer_id:i.Z.getUser().id});return n},rejectRetardGeneralInformations:function(e,n,t){var r=o.h.post("/general-informations/review",{id:e,status:t,reviewer_id:i.Z.getUser().id,reviews:n});return r},deleteGeneralInformation:function(e){var n=o.h["delete"]("/general-informations/".concat(e));return n},reviewGeneralInformation:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.h.patch("/general-informations/review-general-informations/".concat(n))["catch"]((function(e){})).then((function(e){return e}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),getById:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.h.get("general-informations/".concat(n));case 2:return t=e.sent,t.data,e.abrupt("return",t.data.data);case 5:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}()}},50999:(e,n,t)=>{t.r(n),t.d(n,{default:()=>we});t(68309);var r=t(66252),a=t(3577),o=t(49963),i=t(44272),s=t(90475),u={class:"row"},l={class:"col-sm-12"},c={class:"iq-card-body profile-page p-0"},d={class:"profile-header"},m=(0,r._)("div",{class:"cover-container"},[(0,r._)("img",{src:i,alt:"profile-bg",class:"rounded img-fluid"})],-1),f={class:"user-detail text-center mb-3"},p=(0,r._)("div",{class:"profile-img"},[(0,r._)("img",{src:s,alt:"profile-img",class:"avatar-130 img-fluid"})],-1),g={class:"profile-detail mt-1"},b=(0,r._)("br",null,null,-1),_={key:0,class:""},v={class:"iq-card-body p-0"},h={class:"user-tabing"},w={class:"col-sm-12"},k={class:"tab-content"},I={class:"iq-card-body p-0"},y={class:"row"},x=(0,r._)("div",{class:"col-lg-4"},null,-1),Z={class:"col-12"},q={key:0},$={class:"col-sm-12"},C={class:"card card-block card-stretch card-height"},G={class:"card-body"},B={class:"user-post-data"},z={class:"d-flex justify-content-between"},D={class:"w-100"},j={class:"d-flex justify-content-between"},S={class:"w-100"},U={key:0,class:"mb-0 text-primary"},W={key:1,class:"alert alert-success w-100"},E={key:0,class:"card-post-toolbar text-end"},F=(0,r._)("span",{class:"material-symbols-outlined"}," edit_note ",-1),T=[F],L=(0,r._)("span",{class:"material-symbols-outlined me-2 md-18"}," edit ",-1),O=(0,r.Uk)(" تعديل "),M=[L,O],Q=(0,r._)("span",{class:"material-symbols-outlined me-2 md-18"}," delete ",-1),V=(0,r.Uk)(" حذف "),P=[Q,V],R={class:"col-md-12 form-group"},A=(0,r._)("h4",{class:"form-label"}," التلخيص العام",-1),H={class:"form-control-plaintext"},J=(0,r._)("hr",null,null,-1),K={class:"col-md-12 form-group"},N={class:"col-md-12 form-group"},X=(0,r._)("h4",{class:"form-label"}," السؤال العام ",-1),Y={class:"form-control-plaintext"},ee={key:1,id:"post-modal-data",class:"iq-card"},ne=(0,r._)("h4",{class:"card-title"},"إضافة التلخيص والفكرة العامة",-1),te={class:"d-flex align-items-center"},re={class:"form-group"},ae=(0,r._)("label",{class:"form-label",for:"bookGeneralIdea"},"الفكرة العامة",-1),oe={key:0,style:{color:"red"}},ie={class:"form-group"},se=(0,r._)("label",{class:"form-label",for:"bookGeneralQuestion"},"سؤال عام ",-1),ue={key:0,style:{color:"red"}},le=(0,r._)("input",{type:"submit",value:"اضافة",href:"javascript:void(0);",class:"btn btn-primary d-block mt-3 mb-3"},null,-1),ce=(0,r._)("hr",null,null,-1);function de(e,n,t,i,s,F){var L=(0,r.up)("iq-card"),O=(0,r.up)("tab-nav-items"),Q=(0,r.up)("tab-nav"),V=(0,r.up)("tab-content-item");return(0,r.wg)(),(0,r.iD)("div",u,[(0,r._)("div",l,[(0,r.Wm)(L,null,{default:(0,r.w5)((function(){return[(0,r._)("div",c,[(0,r._)("div",d,[m,(0,r._)("div",f,[p,(0,r._)("div",g,[b,s.book?((0,r.wg)(),(0,r.iD)("h3",_,(0,a.zw)(s.book.name)+" - قسم التلخيص والفكرة العامة",1)):(0,r.kq)("",!0)])])])])]})),_:1}),(0,r.Wm)(L,{class:"iq-card"},{default:(0,r.w5)((function(){return[(0,r._)("div",v,[(0,r._)("div",h,[(0,r.Wm)(Q,{pills:!0,id:"pills-tab",class:"nav nav-pills d-flex align-items-center justify-content-center profile-feed-items p-0 m-0"},{default:(0,r.w5)((function(){return[(0,r.Wm)(O,{class:"w-100 p-0",active:!0,id:"pills-feed-tab",href:"#theses_container",ariaControls:"pills-home",role:"tab",ariaSelected:!0,title:"المرحلة الثانية - التلخيص والفكرة العامة"})]})),_:1})])])]})),_:1})]),(0,r._)("div",w,[(0,r._)("div",k,[(0,r.Wm)(V,{active:!0,id:"theses_container","aria-labelled-by":"pills-feed-tab"},{default:(0,r.w5)((function(){return[(0,r._)("div",I,[(0,r._)("div",y,[x,(0,r._)("div",Z,[s.generalInformations?((0,r.wg)(),(0,r.iD)("div",q,[(0,r._)("div",$,[(0,r._)("div",C,[(0,r._)("div",G,[(0,r._)("div",B,[(0,r._)("div",z,[(0,r._)("div",D,[(0,r._)("div",j,[(0,r._)("div",S,[s.generalInformations.degree?((0,r.wg)(),(0,r.iD)("p",U,"التقييم || "+(0,a.zw)(s.generalInformations.degree),1)):(0,r.kq)("",!0),s.generalInformations.reviews?((0,r.wg)(),(0,r.iD)("div",W,(0,a.zw)(s.generalInformations.reviews),1)):(0,r.kq)("",!0)]),null==s.generalInformations.status||"retard"==s.generalInformations.status?((0,r.wg)(),(0,r.iD)("div",E,[(0,r._)("div",{class:"dropdown-toggle",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",role:"button",onClick:n[0]||(n[0]=function(e){return s.show=!s.show})},T),(0,r._)("div",{class:(0,a.C_)("dropdown-menu dropdown-menu-right ".concat(s.show?"show":"")),"aria-labelledby":"dropdownMenuButton",style:{}},[(0,r._)("a",{class:"dropdown-item d-flex align-items-center",onClick:n[1]||(n[1]=function(e){return F.updateGeneralInformation(s.generalInformations.id)})},M),(0,r._)("a",{class:"dropdown-item d-flex align-items-center",onClick:n[2]||(n[2]=function(e){return F.deleteGeneralInformation(s.generalInformations.id)})},P)],2)])):(0,r.kq)("",!0)])])])]),(0,r._)("div",R,[A,(0,r._)("p",H,(0,a.zw)(s.generalInformations.summary),1)]),J,(0,r._)("div",K,[(0,r._)("div",N,[X,(0,r._)("p",Y,(0,a.zw)(s.generalInformations.general_question),1)])])])]),(0,r.Wm)(L,null,{body:(0,r.w5)((function(){return[null==s.generalInformations.status||"retard"==s.generalInformations.status?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn btn-primary d-block w-100 mb-3",onClick:n[3]||(n[3]=function(){return F.reviewGeneralInformation&&F.reviewGeneralInformation.apply(F,arguments)})}," اعتماد ")):(0,r.kq)("",!0),(0,r._)("button",{class:"btn btn-success d-block w-100",onClick:n[4]||(n[4]=function(e){return F.back()})}," عودة لصفحة الانجاز ")]})),_:1})])])):((0,r.wg)(),(0,r.iD)("div",ee,[(0,r._)("div",null,[(0,r.Wm)(L,{id:"post-modal-data","body-class":"iq-card iq-card-block iq-card-stretch iq-card-height"},{headerTitle:(0,r.w5)((function(){return[ne]})),body:(0,r.w5)((function(){return[(0,r._)("div",te,[(0,r._)("form",{onSubmit:n[7]||(n[7]=(0,o.iM)((function(){return F.submitGenralInformationsForm&&F.submitGenralInformationsForm.apply(F,arguments)}),["prevent"])),class:"post-text ml-3 w-100 row"},[(0,r._)("div",re,[ae,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":n[5]||(n[5]=function(e){return i.v$.generalInfromationsform.summary.$model=e}),rows:"5",placeholder:"... اكتب الملخص العام عدد حروفه بين 350 و 4800",class:"rounded form-control",id:"bookGeneralIdea"},null,512),[[o.nr,i.v$.generalInfromationsform.summary.$model]]),i.v$.generalInfromationsform.summary.$error?((0,r.wg)(),(0,r.iD)("small",oe," لطفًا قم بكتابة تلخيص عدد حروفه بين 350 و 4800 خالي من الرموز التعبيرية (emojis) ")):(0,r.kq)("",!0)]),(0,r._)("div",ie,[se,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":n[6]||(n[6]=function(e){return i.v$.generalInfromationsform.general_question.$model=e}),rows:"5",placeholder:"...  اكتب هنا السؤال العام الذي يسعى هذا الكتاب لإجابته لا يزيد عدد حروفة عن 250",class:"rounded form-control",id:"bookGeneralQuestion"},null,512),[[o.nr,i.v$.generalInfromationsform.general_question.$model]]),i.v$.generalInfromationsform.general_question.$error?((0,r.wg)(),(0,r.iD)("small",ue," قم بكتابة سؤال عام لا يزيد عدد حروفة عن 250 ")):(0,r.kq)("",!0)]),le],32)]),ce]})),_:1}),(0,r.Wm)(L,null,{body:(0,r.w5)((function(){return[(0,r._)("button",{class:"btn btn-success d-block w-100",onClick:n[8]||(n[8]=function(e){return F.back()})}," عودة لصفحة الانجاز ")]})),_:1})])]))])])])]})),_:1})])])])}var me=t(50124),fe=t(48534),pe=(t(74916),t(15306),t(54028)),ge=t(62587),be=t(91039);const _e={setup:function(){return{v$:(0,pe.ZP)()}},name:"GeneralSummary",mounted:function(){this.getInformations()},validations:function(){return{generalInfromationsform:{general_question:{required:ge.C1,minLength:(0,ge.Ei)(10),maxLength:(0,ge.BS)(500)},summary:{required:ge.C1,minLength:(0,ge.Ei)(350),maxLength:(0,ge.BS)(4800)}}}},data:function(){return{auditable:!1,book:null,generalInfromationsform:{general_question:"",summary:"",user_book_id:null},generalInformations:[],show:!1}},methods:{removeEmojis:function(e){var n=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;return e.replace(n,"")},submitGenralInformationsForm:function(){var e=this;return(0,fe.Z)((0,me.Z)().mark((function n(){return(0,me.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.generalInfromationsform.general_question=e.removeEmojis(e.generalInfromationsform.general_question),e.generalInfromationsform.summary=e.removeEmojis(e.generalInfromationsform.summary),e.v$.$touch(),e.v$.generalInfromationsform.$invalid){n.next=9;break}return n.next=6,be.Z.addGeneralInformations(e.generalInfromationsform);case 6:e.generalInformations=n.sent,e.v$.generalInfromationsform.general_question.$reset(),e.v$.generalInfromationsform.summary.$reset();case 9:case"end":return n.stop()}}),n)})))()},getInformations:function(){var e=this;return(0,fe.Z)((0,me.Z)().mark((function n(){var t;return(0,me.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,be.Z.getByBook(e.$route.params.id);case 2:t=n.sent,e.generalInformations=t.general_informations,e.generalInfromationsform.user_book_id=t.user_book.id,e.book=t.user_book.book,!e.generalInformations||"retard"!==e.generalInformations.status&&null!==e.generalInformations.status||(e.auditable=!0);case 7:case"end":return n.stop()}}),n)})))()},deleteGeneralInformation:function(e){this.show=!this.show;var n=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1});n.fire({title:"هل أنت متأكد؟",text:"موافقتك تعني حذف هذا السؤال ",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم قم بالحذف",cancelButtonText:"تراجع  ",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((function(t){t.isConfirmed&&be.Z.deleteGeneralInformation(e).then((function(e){n.fire({title:"تم الحذف",text:"تم حذف السؤال",icon:"success",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}),location.reload()}))["catch"]((function(e){console.log(e)}))}))},updateGeneralInformation:function(e){this.show=!this.show,this.$router.push({path:"/general/update/".concat(e)})},reviewGeneralInformation:function(){var e=this;return(0,fe.Z)((0,me.Z)().mark((function n(){var t;return(0,me.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:t=e.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1}),t.fire({title:"هل أنت متأكد؟",text:"في حال الاعتماد لن يمكنك اضافة سؤال جديد أو التعديل على التلخيص الذي كتبته ",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم قم بالاعتماد",cancelButtonText:"تراجع  ",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((function(n){n.isConfirmed&&be.Z.reviewGeneralInformation(e.generalInformations.user_book_id).then((function(e){t.fire({title:"تم الاعتماد",text:"تم اعتماد طلبك",icon:"success",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}),location.reload()}))["catch"]((function(e){console.log(e)}))}));case 2:case"end":return n.stop()}}),n)})))()},back:function(){this.$router.push({name:"achievement.steps",params:{id:this.$route.params.id}})}}};var ve=t(83744);const he=(0,ve.Z)(_e,[["render",de]]),we=he},44272:(e,n,t)=>{e.exports=t.p+"img/book-banner.6a2a5a9c.png"},90475:(e,n,t)=>{e.exports=t.p+"img/reader.b5157672.png"}}]);
//# sourceMappingURL=999.aa57b61e.js.map