"use strict";(self["webpackChunkosboha180"]=self["webpackChunkosboha180"]||[]).push([[4980],{63692:(t,e,n)=>{n.d(e,{Z:()=>u});var r=n(50124),a=n(48534),s=n(62760),o=n(57333);const u={getGeneralStatistics:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.h.get("userbook/general-statistics/");case 2:return n=t.sent,t.abrupt("return",n.data.data);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),checkAchievement:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.h.get("books/check-achievement/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data.data);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),updateBook:function(t,e){return(0,a.Z)((0,r.Z)().mark((function n(){var a;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,s.h.patch("books/".concat(e),t);case 2:return a=n.sent,n.abrupt("return",a.data.data);case 4:case"end":return n.stop()}}),n)})))()},getBookByName:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.h.get("books/by-name/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data.data);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),getStatistics:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.h.get("userbook/statistics/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data.data);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),getBook:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.h.get("books/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data.data);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),getUserBook:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.h.get("books/user-book/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data.data);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),getAllUserBooks:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.h.get("books/user");case 2:return n=t.sent,t.abrupt("return",n.data.data);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),getAllBooks:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.h.get("books?page="+e);case 2:return n=t.sent,t.abrupt("return",n.data.data);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),acceptThesis:function(t){var e=s.h.post("/thesises/audit",{id:t,status:"review",auditor_id:o.Z.getUser().id});return e},rejectThesis:function(t,e){var n=s.h.post("/thesises/audit",{id:t,status:"rejected",auditor_id:o.Z.getUser().id,reviews:e});return n},addBook:function(t){return(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.h.post("books",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))()},deleteBook:function(t){return(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.h["delete"]("books/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))()}}},62868:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(50124),a=n(48534),s=(n(68309),n(62760));const o={getUnactive:function(){var t=s.h.get("users/list/un-active");return t},getUnactiveReviwers:function(){var t=s.h.get("users/list/un-active-reviwers-auditors");return t},updateInfo:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new FormData,n.append("name",e.name),n.append("image",e.file[0]),t.next=5,s.h.post("users/update-info",n,{headers:{"Content-Type":"multipart/form-data"}})["catch"]((function(t){console.log(t)}));case 5:return a=t.sent,console.log(a),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),updateName:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new FormData,n.append("name",e.name),n.append("id",e.id),t.next=5,s.h.post("users/update-name",n,{headers:{"Content-Type":"multipart/form-data"}})["catch"]((function(t){console.log(t)}));case 5:return a=t.sent,console.log(a),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),getUser:function(t){return(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.h.get("users/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data.data);case 4:case"end":return e.stop()}}),e)})))()},searchByName:function(t){return(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.h.get("users/search-by-name/".concat(t));case 3:return n=e.sent,e.next=6,n.data.data;case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},getAll:function(){return(0,a.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.h.get("users/");case 2:return e=t.sent,t.abrupt("return",e.data.data);case 4:case"end":return t.stop()}}),t)})))()},deActiveUser:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e,n){var a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.h.post("users/deactive-user",{id:e,rejectNote:n});case 3:return a=t.sent,t.abrupt("return",a.data);case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e,n){return t.apply(this,arguments)}return e}(),acceptUser:function(t){var e=s.h.patch("users/activate/".concat(t));return e},getUserStatistics:function(){return(0,a.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.h.get("users/statistics");case 2:return e=t.sent,t.abrupt("return",e.data.data);case 4:case"end":return t.stop()}}),t)})))()},acceptThesis:function(t){return!0}}},54980:(t,e,n)=>{n.r(e),n.d(e,{default:()=>N});n(74916),n(64765),n(68309);var r=n(66252),a=n(49963),s=n(3577),o={class:"row"},u=(0,r._)("div",{class:"col-sm-12"},[(0,r._)("div",{class:"card position-relative inner-page-bg bg-primary",style:{height:"150px"}},[(0,r._)("div",{class:"inner-page-title"},[(0,r._)("h3",{class:"text-white"},"الكتب")])])],-1),c={key:0,class:"col-sm-12"},i=(0,r._)("h4",{class:"card-title"},"قائمة الكتب",-1),l={key:0,class:"alert alert-danger",role:"alert"},p={class:"iq-email-search d-flex justify-content-center mb-3"},d={class:"w-100 me-2 position-relative searchbox"},h={class:"form-group mb-0"},f=(0,r._)("i",{class:"material-symbols-outlined"}," search ",-1),v=[f],k={class:"table-responsive"},m={id:"datatable",class:"table table-striped table-bordered"},w=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"اسم الكتب"),(0,r._)("th",null,"عدد الصفحات"),(0,r._)("th",null,"قسم الكتاب"),(0,r._)("th",null,"صعوبة الكتاب")])],-1),g=["onClick"],b=["onClick"],Z={class:"pagination w-100"},x=(0,r.Uk)(" السابق "),_=(0,r.Uk)(" التالي ");function y(t,e,n,f,y,B){var C=(0,r.up)("router-link"),U=(0,r.up)("iq-card");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",o,[u,y.books&&y.books.length>0?((0,r.wg)(),(0,r.iD)("div",c,[(0,r.Wm)(U,null,{headerTitle:(0,r.w5)((function(){return[i,y.error?((0,r.wg)(),(0,r.iD)("div",l," لايمكن حذف الكتاب لاحتوائه على توثيقات ")):(0,r.kq)("",!0),(0,r._)("div",p,[(0,r._)("form",d,[(0,r._)("div",h,[(0,r.wy)((0,r._)("input",{type:"text",class:"border border-primary w-100 text search-input form-control","onUpdate:modelValue":e[0]||(e[0]=function(t){return y.search=t}),placeholder:"ابحث عن كتاب",onKeyup:e[1]||(e[1]=function(){return B.filteredBooks&&B.filteredBooks.apply(B,arguments)})},null,544),[[a.nr,y.search,void 0,{trim:!0}]]),(0,r._)("a",{class:"search-link",href:"javascript:void(0);",onClick:e[2]||(e[2]=function(t){return B.filteredBooks()})},v)])])])]})),body:(0,r.w5)((function(){return[(0,r._)("button",{onClick:e[3]||(e[3]=function(e){return t.$router.push({path:"/admin/addbook"})}),class:"btn btn-primary float-end"}," اضافة الكتاب "),(0,r._)("div",k,[(0,r._)("table",m,[w,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(y.books,(function(n,a){return(0,r.wg)(),(0,r.iD)("tr",{key:a},[(0,r._)("td",null,[(0,r._)("a",{href:"javascript:void(0);",onClick:e[4]||(e[4]=function(e){return t.listQuestions(t.question.user_book.id)})},(0,s.zw)(n.name),1)]),(0,r._)("td",null,(0,s.zw)(n.end_page-n.start_page),1),(0,r._)("td",null,(0,s.zw)(n.section.name),1),(0,r._)("td",null,(0,s.zw)(n.level.name),1),(0,r._)("td",null,[(0,r._)("button",{onClick:function(e){return t.$router.push("updatebook/".concat(n.id))},class:"btn btn-primary text-white bg-delete"}," تعديل ",8,g)]),(0,r._)("td",null,[(0,r._)("button",{onClick:function(t){return B.deleteThesis(n.id)},class:"btn btn-danger text-white bg-delete"}," حذف ",8,b)])])})),128))])]),(0,r._)("ul",Z,[1!=n.page?((0,r.wg)(),(0,r.j4)(C,{key:0,class:"page-item page-link",to:{name:"admin.book-list",query:{page:n.page-1}},rel:"prev"},{default:(0,r.w5)((function(){return[x]})),_:1},8,["to"])):(0,r.kq)("",!0),(0,r._)("li",{class:(0,s.C_)(["page-item page-link",B.checkActive(n.page)])},[(0,r.Wm)(C,{class:"page-item page-link",to:{name:"admin.book-list",query:{page:n.page}}},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,s.zw)(n.page),1)]})),_:1},8,["to"])],2),B.hasNextPage?((0,r.wg)(),(0,r.j4)(C,{key:1,class:"page-item page-link",to:{name:"admin.book-list",query:{page:n.page+1}},rel:"next"},{default:(0,r.w5)((function(){return[_]})),_:1},8,["to"])):(0,r.kq)("",!0)])])]})),_:1})])):(0,r.kq)("",!0)])])}var B=n(50124),C=n(48534),U=n(11686),j=(n(62868),n(63692)),q=n(54028);const T={name:"acceptNormal",components:{},props:["page"],setup:function(){return{v$:(0,q.ZP)()}},mounted:function(){U.CF.index()},created:function(){var t=this;return(0,C.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return(0,r.m0)((function(){t.books=null,t.getBooks(t.page)})),e.next=3,t.getBooks(t.page);case 3:console.log(t.books);case 4:case"end":return e.stop()}}),e)})))()},data:function(){return{error:!1,books:[],users:[],reject:[],rejectNote:"",current:1,totalBooks:"",loader:!1,empty:"",search:""}},methods:{getBooks:function(t){var e=this;return(0,C.Z)((0,B.Z)().mark((function n(){var r;return(0,B.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,j.Z.getAllBooks(t);case 2:r=n.sent,e.books=r.books.data,e.totalBooks=r.books.total,e.current=t;case 6:case"end":return n.stop()}}),n)})))()},deleteThesis:function(t){var e=this;this.show=!this.show;var n=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1});n.fire({title:"هل أنت متأكد؟",text:"موافقتك تعني حذف هذه الكتاب ",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم قم بالحذف",cancelButtonText:"تراجع  ",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((function(r){r.isConfirmed&&j.Z.deleteBook(t).then((function(t){n.fire({title:"تم الحذف",text:"تم حذف الكتاب",icon:"success",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}),location.reload()}))["catch"]((function(t){e.error=!e.error}))}))},filteredBooks:function(){var t=this;return(0,C.Z)((0,B.Z)().mark((function e(){var n,r;return(0,B.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.empty="",!t.search){e.next=8;break}return e.next=4,j.Z.getBookByName(t.search);case 4:n=e.sent,"empty"==n?t.empty="لا يوجد كتاب بهذا الاسم":(t.books=n.data,t.totalBooks=n.total),e.next=12;break;case 8:return e.next=10,j.Z.getAllBooks(t.page);case 10:r=e.sent,t.books=r.books.data;case 12:case"end":return e.stop()}}),e)})))()},checkActive:function(t){var e="";return this.current==t?e="active":e+=" done",e}},computed:{hasNextPage:function(){var t=Math.ceil(this.totalBooks/4);return this.page<t},totalPages:function(){return Math.ceil(this.totalBooks/10)}}};var z=n(83744);const A=(0,z.Z)(T,[["render",y]]),N=A}}]);
//# sourceMappingURL=4980.c8586866.js.map