"use strict";(self["webpackChunkosboha180"]=self["webpackChunkosboha180"]||[]).push([[2639],{82639:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ie});n(68309);var s=n(66252),i=n(3577),r=n(49963),o=n(79885),a=n(39950),c=n(97573),u=function(e){return(0,s.dD)("data-v-cf0ed396"),e=e(),(0,s.Cn)(),e},l={class:"row"},d={class:"col-sm-12"},m={class:"card position-relative inner-page-bg bg-primary",style:{height:"150px"}},p={class:"inner-page-title"},h=u((function(){return(0,s._)("h3",{class:"text-white"},"عرض الأطروحات للمراجعة و التدقيق",-1)})),f={class:"text-white"},_={key:0,class:"col-sm-12"},g=u((function(){return(0,s._)("h4",{class:"card-title"},"الأطروحات",-1)})),w={key:0,class:"px-2"},b={key:1,class:"px-2"},k=u((function(){return(0,s._)("span",{class:"px-2"}," || ",-1)})),v={class:"px-2"},x={id:"form-wizard1",class:"text-center mt-3"},y={id:"top-tab-list",class:"p-0 row list-inline"},C=["onClick"],j={href:"javascript:void(0);"},B={key:0,class:"material-symbols-outlined align-middle"},T={key:1,class:"material-symbols-outlined align-middle"},D=u((function(){return(0,s._)("h4",{class:"card-title"},"قبول - رفض",-1)})),q={class:"row"},Z={class:"col-lg-6 col-md-12 col-sm-12 form-group align-middle"},z=u((function(){return(0,s._)("h3",{class:"text-center"}," !! الزر الحاسم ",-1)})),N=u((function(){return(0,s._)("br",null,null,-1)})),$=u((function(){return(0,s._)("h5",{class:"text-center"}," نعم تمامًا فأمكانية الضغط على هذا الزر ستتاح لك حينما نقوم بإنهاء مهمتك المكلف بها في طلب السفير لتوثيق قراءته. اعتمادك الطلب وإرساله للمرحلة القادمة أو رفضه مسؤولية حقيقية لأنها تؤثر على حماية التعلم وجودة التعليم. كن حريصًا على إتمام مهمتك بكل دقة قبل الضغط على هذا الزر أدناه. يتاح القبول بعد اكتمال الشروط، ويكون الرفض في حال وجود مشكلة حقيقية في الطلب كأن يكون مخالف لشروط الحصرية أو مشاكل أخرى مخالفة للقانون ",-1)})),U=["disabled"],S={key:1},O={key:1,class:"col-md-12 mb-3 form-group mt-2"},I=u((function(){return(0,s._)("label",{for:"rejectNote",class:"form-label"},"سبب الرفض *",-1)})),R={key:0,style:{color:"red"}},A={class:"d-inline-block w-100 text-center"},W={key:0,class:"col-sm-12 text-center"},H=u((function(){return(0,s._)("img",{src:o,alt:"loader",style:{height:"100px"}},null,-1)})),K=[H],Y=u((function(){return(0,s._)("div",{class:"col-lg-6 col-md-12 col-sm-12 form-group"},[(0,s._)("div",{class:"image-block text-center"},[(0,s._)("img",{src:a,class:"img-fluid rounded w-75",alt:"blog-img"})])],-1)})),F={key:1,class:"col-sm-12"},P=u((function(){return(0,s._)("div",{class:"iq-card-body p-0"},[(0,s._)("div",{class:"image-block text-center"},[(0,s._)("img",{src:c,class:"img-fluid rounded w-50",alt:"blog-img"})]),(0,s._)("h4",{class:"text-center mt-3 mb-3"},"لا يوجد أطروحات")],-1)}));function V(e,t,n,o,a,c){var u=(0,s.up)("Thesis"),H=(0,s.up)("iq-card");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",d,[(0,s._)("div",m,[(0,s._)("div",p,[h,(0,s._)("p",f,"عدد الأطروحات "+(0,i.zw)(a.thesis.length),1)])])]),a.thesis.length>0?((0,s.wg)(),(0,s.iD)("div",_,[(0,s.Wm)(H,null,{headerTitle:(0,s.w5)((function(){return[g,"reviewer"==a.role||"admin"==a.role?((0,s.wg)(),(0,s.iD)("span",w," اسم السفير : "+(0,i.zw)(a.thesis[0].user_book.user.name),1)):((0,s.wg)(),(0,s.iD)("span",b," اسم السفير : ***************")),k,(0,s._)("span",v," اسم الكتاب : "+(0,i.zw)(a.thesis[0].user_book.book.name),1)]})),body:(0,s.w5)((function(){return[(0,s._)("form",x,[(0,s._)("ul",y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.thesis,(function(e,t){return(0,s.wg)(),(0,s.iD)("li",{key:t,class:(0,i.C_)([c.checkActive(t,t+1),"col-lg-3 col-6 mb-2 text-start"]),onClick:function(e){return c.changeTab(t+1)},id:"account"},[(0,s._)("a",j,["review"==e.status?((0,s.wg)(),(0,s.iD)("span",B," manage_search ")):(0,s.kq)("",!0),"audit"==e.status?((0,s.wg)(),(0,s.iD)("span",T," star ")):(0,s.kq)("",!0),(0,s._)("span",null,"أطروحة "+(0,i.zw)(t+1),1)])],10,C)})),128))]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.thesis,(function(e,t){return(0,s.wg)(),(0,s.iD)("fieldset",{key:t,class:(0,i.C_)(a.current==t+1?"d-block":"d-none")},[(0,s.Wm)(u,{reviewStage:!0,onStatusUpdated:c.handleStatusUpdated,thesis:e,userBook:a.userBook,index:t,onOnNext:c.changeTab},null,8,["onStatusUpdated","thesis","userBook","index","onOnNext"])],2)})),128))])]})),_:1}),(0,s.Wm)(H,null,{headerTitle:(0,s.w5)((function(){return[D]})),body:(0,s.w5)((function(){return[(0,s._)("div",q,[(0,s._)("div",Z,[z,N,$,"reviewer"==a.role||"admin"==a.role?((0,s.wg)(),(0,s.iD)("input",{key:0,type:"button",value:"انجاز صالح للتقييم",class:"btn btn-primary d-block w-100 mt-3",onClick:t[0]||(t[0]=function(e){return c.accept()}),disabled:!c.isAccepted},null,8,U)):(0,s.kq)("",!0),c.isSuper?((0,s.wg)(),(0,s.iD)("div",S,[a.reject?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("input",{key:0,type:"button",value:"انجاز مرفوض",class:"btn btn-danger d-block mt-3 w-100",onClick:t[1]||(t[1]=function(e){return c.setReject()})})),a.reject?((0,s.wg)(),(0,s.iD)("div",O,[I,(0,s.wy)((0,s._)("textarea",{name:"rejectNote",class:"form-control",id:"rejectNote",rows:"5",required:"required","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.rejectNote=e})},null,512),[[r.nr,a.rejectNote]]),o.v$.rejectNote.$error?((0,s.wg)(),(0,s.iD)("small",R,(0,i.zw)("سبب الرفض مطلوب"))):(0,s.kq)("",!0),(0,s._)("div",A,[a.loader?((0,s.wg)(),(0,s.iD)("div",W,K)):(0,s.kq)("",!0)]),(0,s._)("input",{type:"button",value:"انجاز مرفوض",class:"btn btn-danger d-block mt-3 w-100",onClick:t[3]||(t[3]=function(e){return c.rejectUserBook()})})])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)]),Y])]})),_:1})])):((0,s.wg)(),(0,s.iD)("div",F,[(0,s.Wm)(H,{class:"iq-card"},{default:(0,s.w5)((function(){return[P]})),_:1})]))])}var E=n(50124),G=n(48534),J=n(18685),L=n(74674),M=n(68621),Q=n(57333),X=n(54028),ee=n(62587);const te={name:"Theses",created:function(){var e=this;return(0,G.Z)((0,E.Z)().mark((function t(){return(0,E.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.role=Q.Z.getRole()[0],t.next=3,e.getThesis(e.status);case 3:case"end":return t.stop()}}),t)})))()},setup:function(){return{v$:(0,X.ZP)()}},components:{Thesis:J.Z},data:function(){return{current:1,thesis:[],role:"",reject:!1,rejectNote:"",reviweNote:"",acceptedThesises:0,userBook:null,loader:!1,status:""}},validations:function(){return{rejectNote:{required:(0,ee.CF)((function(e){return 1==this.reject}))},reviweNote:{required:ee.C1}}},methods:{handleStatusUpdated:function(){this.getThesis(this.status)},getThesis:function(){var e=this;return(0,G.Z)((0,E.Z)().mark((function t(){var n;return(0,E.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,L.Z.getByUserBook(e.$route.params.user_book_id,e.status);case 2:n=t.sent,e.thesis=n.thesises,e.userBook=n.userBook,e.acceptedThesises=n.acceptedThesises;case 6:case"end":return t.stop()}}),t)})))()},setReject:function(){this.reject=!0},rejectUserBook:function(){var e=this;if(this.v$.$touch(),!this.v$.rejectNote.$invalid){var t=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1});t.fire({title:"هل أنت متأكد؟",text:"موافقتك تعني رفض انجاز هذا السفير",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم قم بالرفض",cancelButtonText:"تراجع  ",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((function(n){n.isConfirmed&&(e.loader=!0,M.Z.rejectRetardUserBook(e.$route.params.user_book_id,e.rejectNote,"rejected").then((function(n){t.fire({title:"تم الرفض",text:"تم رفض الانجاز",icon:"success",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}),e.$router.push({name:"thesis-review.list"})}))["catch"]((function(e){console.log(e)})))}))}},accept:function(e){var t=this,n=this.$swal.mixin({customClass:{confirmButton:"btn btn-primary btn-lg",cancelButton:"btn btn-outline-primary btn-lg ms-2"},buttonsStyling:!1});n.fire({title:"هل أنت متأكد؟",text:"موافقتك تعني قبول انجاز هذا السفير",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم قم بالقبول",cancelButtonText:"تراجع  ",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}).then((function(e){e.isConfirmed&&L.Z.acceptThesis(t.userBook.id,"audit").then((function(e){n.fire({title:"تم القبول",text:"تم قبول الانجاز",icon:"success",showClass:{popup:"animate__animated animate__zoomIn"},hideClass:{popup:"animate__animated animate__zoomOut"}}),location.reload()}))["catch"]((function(e){console.log(e)}))}))},retardThesis:function(e){},changeTab:function(e){this.current=e,window.scrollTo({behavior:"smooth"})},checkActive:function(e,t){var n="";return this.current>e&&(n="active"),this.current>t&&(n+=" done"),n}},computed:{isAccepted:function(){return this.acceptedThesises>=8},user:function(){return Q.Z.getUser()},isSuper:function(){return Q.Z.hasRoles(this.user,["admin","super_auditer","super_reviewer"])}}};var ne=n(83744);const se=(0,ne.Z)(te,[["render",V],["__scopeId","data-v-cf0ed396"]]),ie=se},39950:(e,t,n)=>{e.exports=n.p+"img/accept-reject.4e690409.png"},97573:(e,t,n)=>{e.exports=n.p+"img/export-congrats.05e72d52.png"}}]);
//# sourceMappingURL=2639.be3243b4.js.map